# AI 助手

HOI4 Code Studio 内置了强大的 AI 助手，旨在辅助 Mod 开发者进行代码编写、逻辑规划和问题解答。AI 助手集成在编辑器右侧面板中，方便在开发过程中随时调用。

## 功能入口

在编辑器右侧面板的顶部标签栏中，点击 **AI** 标签即可打开 AI 助手界面。

## 核心模式

AI 助手提供三种预设模式，以适应不同的使用场景：

### 1. Plan (规划模式)
- **用途**：用于复杂任务的拆解和规划。
- **特点**：AI 会侧重于分析需求、制定步骤和逻辑梳理，而不是直接生成大量代码。
- **场景**：设计新的国策树结构、构思复杂的事件链逻辑。

### 2. Code (代码模式)
- **用途**：专注于代码生成和具体实现。
- **特点**：AI 会直接生成符合 HOI4 脚本语法的代码片段。
- **场景**：编写具体的国策效果、事件触发器、定义新的科技或装备。

### 3. Ask (问答模式)
- **用途**：通用咨询和答疑。
- **特点**：类似传统的 ChatGPT 对话，适合询问概念性问题。
- **场景**：查询某个触发器 (trigger) 的用法、了解某个效果 (effect) 的作用范围。

## 配置与设置

点击 AI 面板右上角的齿轮图标可以打开设置菜单：

- **OpenAI API Key**：配置你的 API 密钥。
- **Base URL**：配置 API 接口地址，支持 OpenAI 官方接口或兼容接口（如本地模型、第三方中转）。
- **Model**：指定使用的模型名称（如 `gpt-4`、`claude-3-5-sonnet` 等）。
- **Markdown 渲染**：开启后，AI 的回复将支持 Markdown 格式渲染（代码高亮、列表等）。
- **返回推理 (Request Reasoning)**：开启后，如果模型支持（如深度思考模型），将请求并显示模型的推理过程（Chain of Thought）。

## 历史记录

点击 AI 面板顶部的时钟图标可以查看历史对话记录。
- 支持创建新会话。
- 支持切换到之前的会话继续对话。
- 支持删除不再需要的会话。

## 使用技巧

- 在 **Code 模式** 下，描述清楚你的需求（例如：“创建一个德国的国策，ID 为 GER_new_focus，前置条件是拥有 50 个工厂”），AI 能生成更准确的代码。
- 利用 **Plan 模式** 先理清思路，再用 **Code 模式** 实现具体步骤。
- 如果使用的是支持推理的模型（如 o1 系列或 DeepSeek-R1），建议开启 **返回推理** 功能，以获得更高质量的回答。
